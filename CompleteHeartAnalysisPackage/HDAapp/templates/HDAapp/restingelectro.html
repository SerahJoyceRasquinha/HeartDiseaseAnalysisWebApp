<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analysis</title>
    <style>
        /* Reset default margin and padding */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: white; /* White background for the body */
            color: black; /* Black text color */
            line-height: 1.6;
        }

        header {
            background-color: black; /* Black background for the header */
            color: white; /* White text color */
            text-align: center;
            padding: 1rem;
        }

        header h1 {
            font-size: 2rem; /* Adjust font size as needed */
            margin-top:3%;
        }
        .back {
            position: absolute;
            top: 20px;
            left: 20px;
            display: inline-block;
            padding: 10px 20px;
            border-radius: 20px;
            border: 2px solid lightblue;
            background-color: lightblue;
            color: black;
            text-align: center;
            line-height: 1.5;
            font-size: 1rem;
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s ease;
            z-index: 3;
        }
        .back:hover {
            border-color: darkblue;
            background-color: darkblue;
            color: white;
        }

        main {
            max-width: 2000px; /* Increase max-width for larger charts */
            margin: 0 auto; /* Center align main content */
        }

        canvas {
            display: block;
            width: 1000px; /* Set a fixed width for the canvas */
            height: 400px; /* Adjust height as needed */
            margin: 0 auto; /* Center align the canvas */
            border: 1px solid black;
        }
        
        .Section{
            border: 2px solid black;
            padding: 10px;
            margin:2%;
            padding-left:1.5%;
        }

        ol{
            margin-left:3%;
        }

        ul{
            margin-left:5%;
        }

        .navigation {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 20px;
            margin-top:3%;
        }

        .nav-button {
            padding: 10px 20px;
            border-radius: 20px;
            border: 2px solid white;
            background-color: transparent;
            color: white;
            text-align: center;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .nav-button:hover {
            border-color: black;
            background-color: white;
            color: black;
        }
    </style>
</head>
<body>
    <a href="{% url 'homepage' %}#mainContent" class="back">Back</a>
    <header>
        <h1>Analysis Based On Past Data ðŸ“Š</h1>
        <div class="navigation">
            <button class="nav-button" onclick="window.location.href='{% url 'exang' %}'">Exercise-Induced Angina Analysis</button>
            <button class="nav-button" onclick="window.location.href='{% url 'chestpain' %}'">Chest Pain Analysis</button>
            <button class="nav-button" onclick="window.location.href='{% url 'fastbs' %}'">Fasting Blood Sugar Analysis</button>
            <button class="nav-button" onclick="window.location.href='{% url 'restingelectro' %}'">Resting Electrocardiogram Analysis</button>
            <button class="nav-button" onclick="window.location.href='{% url 'slope' %}'">Slope Analysis</button>
            <button class="nav-button" onclick="window.location.href='{% url 'bloodves' %}'">Blood Vessel Count Analysis</button>
            <button class="nav-button" onclick="window.location.href='{% url 'restingBP' %}'">Resting Blood Pressure</button>
        </div>
    </header>
    <main>    
        <div class="Section">
            <h1>Resting Electrocardiogram in the Context of Cardiovascular Disease (CVD)</h1>

            <h2>Definition</h2>
            <p>
                A <strong>Resting Electrocardiogram (ECG or EKG)</strong> is a non-invasive test that records the electrical 
                activity of the heart while the patient is at rest. It involves placing electrodes on the skin to capture 
                the heart's electrical signals, producing a graphic representation of the heart's rhythm, rate, and overall 
                electrical activity. The resting ECG is a fundamental diagnostic tool used to assess heart health and detect 
                potential cardiovascular diseases (CVD).
            </p>
            <br>
            <h2>Uses of Resting Electrocardiogram in CVD</h2>
            <p>
                The resting ECG is primarily used to evaluate various heart conditions and monitor cardiovascular health. It helps in:
            </p>
            <ul>
                <li><strong>Detecting Arrhythmias:</strong>
                    <ul>
                        <li>Identifying irregular heart rhythms that may lead to complications.</li>
                    </ul>
                </li>
                <li><strong>Assessing Myocardial Ischemia:</strong>
                    <ul>
                        <li>Detecting reduced blood flow to the heart muscle, which may indicate coronary artery disease.</li>
                    </ul>
                </li>
                <li><strong>Diagnosing Myocardial Infarction:</strong>
                    <ul>
                        <li>Identifying past or ongoing heart attacks by observing characteristic changes in the ECG pattern.</li>
                    </ul>
                </li>
                <li><strong>Evaluating Heart Size and Function:</strong>
                    <ul>
                        <li>Helping in the diagnosis of heart enlargement or other structural abnormalities.</li>
                    </ul>
                </li>
                <li><strong>Monitoring Response to Treatment:</strong>
                    <ul>
                        <li>Assessing the effectiveness of treatments for heart conditions, such as medications or pacemaker placement.</li>
                    </ul>
                </li>
            </ul>
            <br>
            <h2>Causes for Conducting a Resting ECG</h2>
            <p>
                A resting ECG may be recommended for various reasons, including:
            </p>
            <ul>
                <li><strong>Chest Pain or Discomfort:</strong>
                    <ul>
                        <li>To determine if the pain is related to heart problems.</li>
                    </ul>
                </li>
                <li><strong>Shortness of Breath:</strong>
                    <ul>
                        <li>To assess if breathing difficulties are linked to cardiac issues.</li>
                    </ul>
                </li>
                <li><strong>Palpitations:</strong>
                    <ul>
                        <li>To investigate irregular heartbeats or a racing heart.</li>
                    </ul>
                </li>
                <li><strong>High Blood Pressure:</strong>
                    <ul>
                        <li>To evaluate the impact of hypertension on heart health.</li>
                    </ul>
                </li>
                <li><strong>Risk Factors for CVD:</strong>
                    <ul>
                        <li>Individuals with risk factors such as obesity, smoking, diabetes, or a family history of heart disease may undergo an ECG as a preventive measure.</li>
                    </ul>
                </li>
                <li><strong>Preoperative Assessment:</strong>
                    <ul>
                        <li>To evaluate cardiac function before surgery, especially in older adults or those with known heart conditions.</li>
                    </ul>
                </li>
            </ul>
            <br>
            <h2>Effects of Resting ECG on Cardiovascular Health</h2>
            <p>
                The resting ECG plays a crucial role in diagnosing and managing cardiovascular conditions. Its effects include:
            </p>

            <h3>Short-term Effects:</h3>
            <ul>
                <li><strong>Immediate Diagnostic Information:</strong>
                    <ul>
                        <li>Provides instant data on heart rhythm and electrical activity, aiding in quick clinical decision-making.</li>
                    </ul>
                </li>
                <li><strong>Guidance for Further Testing:</strong>
                    <ul>
                        <li>Results may lead to additional tests (e.g., stress testing, echocardiography) to further evaluate heart health.</li>
                    </ul>
                </li>
            </ul>

            <h3>Long-term Effects:</h3>
            <ul>
                <li><strong>Early Detection of Heart Disease:</strong>
                    <ul>
                        <li>Facilitates the early identification of cardiovascular issues, leading to timely interventions and management.</li>
                    </ul>
                </li>
                <li><strong>Monitoring Chronic Conditions:</strong>
                    <ul>
                        <li>Helps in the ongoing assessment of patients with chronic heart diseases, ensuring appropriate treatment adjustments.</li>
                    </ul>
                </li>
                <li><strong>Improved Patient Outcomes:</strong>
                    <ul>
                        <li>By identifying and managing heart conditions early, resting ECGs can lead to improved survival rates and quality of life.</li>
                    </ul>
                </li>
            </ul>
            <br>
            <h2>Prevention and Management in Relation to Resting ECG</h2>
            <p>
                While the resting ECG itself is a diagnostic tool, its findings can inform prevention strategies and management of cardiovascular disease:
            </p>

            <h3>1. Lifestyle Modifications:</h3>
            <ul>
                <li><strong>Heart-Healthy Diet:</strong>
                    <ul>
                        <li>A diet low in saturated fats, trans fats, and cholesterol can help prevent CVD.</li>
                    </ul>
                </li>
                <li><strong>Regular Physical Activity:</strong>
                    <ul>
                        <li>Engage in regular exercise to maintain a healthy heart and weight.</li>
                    </ul>
                </li>
                <li><strong>Weight Management:</strong>
                    <ul>
                        <li>Achieving a healthy weight reduces the strain on the heart and lowers the risk of heart disease.</li>
                    </ul>
                </li>
                <li><strong>Smoking Cessation:</strong>
                    <ul>
                        <li>Quitting smoking significantly decreases cardiovascular risk.</li>
                    </ul>
                </li>
                <li><strong>Stress Management:</strong>
                    <ul>
                        <li>Techniques like mindfulness, meditation, or yoga can help reduce stress levels, contributing to better heart health.</li>
                    </ul>
                </li>
            </ul>

            <h3>2. Regular Health Screenings:</h3>
            <ul>
                <li><strong>Routine ECGs:</strong>
                    <ul>
                        <li>Periodic ECGs may be recommended for individuals at risk of CVD to monitor heart health.</li>
                    </ul>
                </li>
                <li><strong>Blood Pressure and Cholesterol Monitoring:</strong>
                    <ul>
                        <li>Regular checks can help identify and manage hypertension and dyslipidemia.</li>
                    </ul>
                </li>
                <li><strong>Diabetes Management:</strong>
                    <ul>
                        <li>Controlling blood sugar levels is crucial for preventing heart complications.</li>
                    </ul>
                </li>
            </ul>

            <h3>3. Medications:</h3>
            <ul>
                <li><strong>Antihypertensives:</strong>
                    <ul>
                        <li>Medications to manage high blood pressure can prevent complications related to CVD.</li>
                    </ul>
                </li>
                <li><strong>Statins:</strong>
                    <ul>
                        <li>Cholesterol-lowering medications help manage lipid levels and reduce cardiovascular risk.</li>
                    </ul>
                </li>
                <li><strong>Antiplatelet Agents:</strong>
                    <ul>
                        <li>Medications like aspirin can prevent blood clots and reduce the risk of heart attacks.</li>
                    </ul>
                </li>
            </ul>

            <h3>4. Emergency Preparedness:</h3>
            <ul>
                <li><strong>Recognize Symptoms of Cardiac Events:</strong>
                    <ul>
                        <li>Understanding the warning signs of a heart attack or other serious cardiovascular issues can lead to timely medical intervention.</li>
                    </ul>
                </li>
                <li><strong>Seek Medical Attention:</strong>
                    <ul>
                        <li>Prompt medical help is essential in case of acute chest pain, shortness of breath, or other alarming symptoms.</li>
                    </ul>
                </li>
            </ul>
            <br>
            <h2>Conclusion</h2>
            <p>
                The resting electrocardiogram is a vital tool in the evaluation and management of cardiovascular disease. It helps 
                in diagnosing various heart conditions and monitoring patients at risk for CVD. By understanding the role of the 
                resting ECG, patients and healthcare providers can work together to develop effective prevention strategies and 
                treatment plans, ultimately leading to improved heart health and outcomes.
            </p>
            <br>
            <p>This chart visualizes the relationship of Fasting Blood Sugar with respect to both genders of each age respectively and the likelihood of having heart disease.</p>
                <ol type="1">
                    <li><b>Gender Categories (0 = Female, 1 = Male):</b></li>
                    <ul>
                        <li>The chart shows two stacked sections for each age group.</li>
                        <li>The blue bar represents male individuals in that age group.</li>
                        <li>The pink bar represents female individuals in that age group.</li>
                    </ul>
                    <li><b>Segregation based On Who has what type of ECG Result (0 = Normal ECG, 1 = Abnormal ECG, non-specific changes, 2 = Abnormal ECG with significant changes):</b></li>
                    <ul>
                        <li>Light Blue =  Males who have Normal ECG.</li>
                        <li>Blue =  Males who have Abnormal ECG, non-specific changes. </li>
                        <li>Dark Blue =  Males who have Abnormal ECG with significant changes.</li>
                        <li>Light Pink =  Females who have Normal ECG. </li>
                        <li>Pink =  Females who have Abnormal ECG, non-specific changes.</li>
                        <li>Dark Pink =  Females who have Abnormal ECG with significant changes. </li>
                    </ul>
            <canvas id="ecgChart"></canvas>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const chartData = {{ chart_data|safe }};  // Data from Django backend

        // Extract unique ages and prepare datasets for Chart.js
        const ages = [...new Set(chartData.map(item => item.age))];

        // Prepare datasets for male and female, with values for normal ECG, abnormal non-significant, and abnormal significant
        const maleData = ages.map(age => {
            const entry = chartData.find(item => item.age === age && item.gender === 1) || {};
            return {
                normal_ecg: entry[0] || 0,  // restingrelectro 0
                ab_ecg_non: entry[1] || 0,  // restingrelectro 1
                ab_ecg_sig: entry[2] || 0,  // restingrelectro 2
            };
        });

        const femaleData = ages.map(age => {
            const entry = chartData.find(item => item.age === age && item.gender === 0) || {};
            return {
                normal_ecg: entry[0] || 0,  // restingrelectro 0
                ab_ecg_non: entry[1] || 0,  // restingrelectro 1
                ab_ecg_sig: entry[2] || 0,  // restingrelectro 2
            };
        });

        // Create the chart
        const ctx = document.getElementById('ecgChart').getContext('2d');
        const ecgChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ages,
                datasets: [
                    // Male datasets
                    {
                        label: 'Male - Normal ECG',
                        data: maleData.map(data => data.normal_ecg),
                        backgroundColor: '#00ffe1',
                        stack: 'male',
                    },
                    {
                        label: 'Male - Abnormal ECG Non-significant',
                        data: maleData.map(data => data.ab_ecg_non),
                        backgroundColor: '#0080ff',
                        stack: 'male',
                    },
                    {
                        label: 'Male - Abnormal ECG Significant',
                        data: maleData.map(data => data.ab_ecg_sig),
                        backgroundColor: '#0800ff',
                        stack: 'male',
                    },
                    // Female datasets
                    {
                        label: 'Female - Normal ECG',
                        data: femaleData.map(data => data.normal_ecg),
                        backgroundColor: '#cf47f5',
                        stack: 'female',
                    },
                    {
                        label: 'Female - Abnormal ECG Non-significant',
                        data: femaleData.map(data => data.ab_ecg_non),
                        backgroundColor: '#9004b8',
                        stack: 'female',
                    },
                    {
                        label: 'Female - Abnormal ECG Significant',
                        data: femaleData.map(data => data.ab_ecg_sig),
                        backgroundColor: '#700156',
                        stack: 'female',
                    },
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'Stacked Bar Chart: ECG Analysis by Age and Gender'
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Age'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Number of People'
                        },
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
    
</body>
</html>
