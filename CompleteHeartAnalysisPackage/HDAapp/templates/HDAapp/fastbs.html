<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analysis</title>
    <style>
        /* Reset default margin and padding */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: white; /* White background for the body */
            color: black; /* Black text color */
            line-height: 1.6;
        }

        header {
            background-color: black; /* Black background for the header */
            color: white; /* White text color */
            text-align: center;
            padding: 1rem;
        }

        header h1 {
            font-size: 2rem; /* Adjust font size as needed */
            margin-top:3%;
        }
        .back {
            position: absolute;
            top: 20px;
            left: 20px;
            display: inline-block;
            padding: 10px 20px;
            border-radius: 20px;
            border: 2px solid lightblue;
            background-color: lightblue;
            color: black;
            text-align: center;
            line-height: 1.5;
            font-size: 1rem;
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s ease;
            z-index: 3;
        }
        .back:hover {
            border-color: darkblue;
            background-color: darkblue;
            color: white;
        }

        main {
            max-width: 2000px; /* Increase max-width for larger charts */
            margin: 0 auto; /* Center align main content */
        }

        canvas {
            display: block;
            width: 1000px; /* Set a fixed width for the canvas */
            height: 400px; /* Adjust height as needed */
            margin: 0 auto; /* Center align the canvas */
            border: 1px solid black;
        }
        
        .Section{
            border: 2px solid black;
            padding: 10px;
            margin:2%;
            padding-left:1.5%;
        }

        ol{
            margin-left:3%;
        }

        ul{
            margin-left:5%;
        }

        .navigation {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 20px;
            margin-top:3%;
        }

        .nav-button {
            padding: 10px 20px;
            border-radius: 20px;
            border: 2px solid white;
            background-color: transparent;
            color: white;
            text-align: center;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .nav-button:hover {
            border-color: black;
            background-color: white;
            color: black;
        }
    </style>
</head>
<body>
    <a href="{% url 'homepage' %}#mainContent" class="back">Back</a>
    <header>
        <h1>Analysis Based On Past Data ðŸ“Š</h1>
        <div class="navigation">
            <button class="nav-button" onclick="window.location.href='{% url 'exang' %}'">Exercise-Induced Angina Analysis</button>
            <button class="nav-button" onclick="window.location.href='{% url 'chestpain' %}'">Chest Pain Analysis</button>
            <button class="nav-button" onclick="window.location.href='{% url 'fastbs' %}'">Fasting Blood Sugar Analysis</button>
            <button class="nav-button" onclick="window.location.href='{% url 'restingelectro' %}'">Resting Electrocardiogram Analysis</button>
            <button class="nav-button" onclick="window.location.href='{% url 'slope' %}'">Slope Analysis</button>
            <button class="nav-button" onclick="window.location.href='{% url 'bloodves' %}'">Blood Vessel Count Analysis</button>
            <button class="nav-button" onclick="window.location.href='{% url 'restingBP' %}'">Resting Blood Pressure</button>
        </div>
    </header>
    <main>    
        <div class="Section">
            <h1>Fasting Blood Sugar (FBS) in the Context of Cardiovascular Disease (CVD)</h1>

            <h2>Definition</h2>
            <p>
                <strong>Fasting blood sugar (FBS)</strong> refers to the concentration of glucose (sugar) in the blood 
                after an individual has fasted for at least <strong>8 hours</strong>. It is a key indicator used to 
                diagnose and monitor diabetes, prediabetes, and insulin resistance, all of which are significant risk 
                factors for <strong>cardiovascular disease (CVD)</strong>. Elevated fasting blood sugar levels increase 
                the likelihood of developing <strong>atherosclerosis</strong>, which can lead to heart attacks and strokes.
            </p>

            <h2>Causes of Elevated Fasting Blood Sugar in CVD Context</h2>
            <p>Several factors can contribute to high fasting blood sugar levels, particularly those that overlap with 
                conditions leading to cardiovascular disease:
            </p>

            <ul>
                <li><strong>Insulin Resistance:</strong>
                    <ul>
                        <li>Cells do not respond properly to insulin, leading to high glucose levels.</li>
                    </ul>
                </li>
                <li><strong>Type 2 Diabetes:</strong>
                    <ul>
                        <li>Prolonged high blood sugar levels impair vascular health, increasing CVD risk.</li>
                    </ul>
                </li>
                <li><strong>Obesity:</strong>
                    <ul>
                        <li>Excess fat, especially around the abdomen, contributes to insulin resistance and metabolic disorders.</li>
                    </ul>
                </li>
                <li><strong>Sedentary Lifestyle:</strong>
                    <ul>
                        <li>Lack of physical activity reduces glucose utilization by muscles.</li>
                    </ul>
                </li>
                <li><strong>Chronic Stress:</strong>
                    <ul>
                        <li>Triggers cortisol release, leading to increased blood sugar levels over time.</li>
                    </ul>
                </li>
                <li><strong>Unhealthy Diet:</strong>
                    <ul>
                        <li>Consumption of excessive sugars and refined carbohydrates raises fasting blood glucose levels.</li>
                    </ul>
                </li>
                <li><strong>Genetics and Family History:</strong>
                    <ul>
                        <li>A family history of diabetes or metabolic disorders increases the risk of both elevated fasting sugar and CVD.</li>
                    </ul>
                </li>
            </ul>
            <br>
            <h2>Effects of High Fasting Blood Sugar on Cardiovascular Health</h2>
            <p><strong>High fasting blood sugar</strong> directly and indirectly affects the cardiovascular system. Hereâ€™s how:</p>

            <h3>Short-term Effects:</h3>
            <ul>
                <li>Increased Blood Viscosity: High glucose levels can thicken the blood, impairing circulation.</li>
                <li>Endothelial Dysfunction: Damages the inner lining of blood vessels, affecting their flexibility.</li>
            </ul>

            <h3>Long-term Effects and Complications:</h3>
            <ul>
                <li><strong>Atherosclerosis:</strong>
                    <ul>
                        <li>Glucose promotes plaque buildup in arteries, restricting blood flow.</li>
                    </ul>
                </li>
                <li><strong>Hypertension (High Blood Pressure):</strong>
                    <ul>
                        <li>Elevated sugar levels can cause stiff arteries, increasing blood pressure.</li>
                    </ul>
                </li>
                <li><strong>Heart Failure:</strong>
                    <ul>
                        <li>Repeated glucose spikes can weaken the heart over time.</li>
                    </ul>
                </li>
                <li><strong>Myocardial Infarction (Heart Attack):</strong>
                    <ul>
                        <li>Blockages in coronary arteries can result from glucose-related plaque buildup.</li>
                    </ul>
                </li>
                <li><strong>Stroke:</strong>
                    <ul>
                        <li>High blood sugar increases the risk of strokes by promoting blood clots and vascular damage.</li>
                    </ul>
                </li>
                <li><strong>Peripheral Artery Disease (PAD):</strong>
                    <ul>
                        <li>Poor circulation in limbs caused by arterial narrowing, linked to high sugar levels.</li>
                    </ul>
                </li>
            </ul>
            <br>
            <h2>Prevention and Management of Elevated Fasting Blood Sugar for CVD Prevention</h2>
            <p>Effective management of fasting blood sugar helps reduce the risk of cardiovascular diseases. Below are key strategies:</p>

            <h3>1. Lifestyle Modifications:</h3>
            <ul>
                <li><strong>Healthy Diet:</strong>
                    <ul>
                        <li>Focus on a balanced diet with low glycemic index foods, such as whole grains, vegetables, and lean proteins.</li>
                        <li>Reduce sugar and refined carbohydrate intake to prevent glucose spikes.</li>
                    </ul>
                </li>
                <li><strong>Regular Exercise:</strong>
                    <ul>
                        <li>Engage in 30 minutes of moderate aerobic activity daily to enhance insulin sensitivity.</li>
                    </ul>
                </li>
                <li><strong>Weight Management:</strong>
                    <ul>
                        <li>Losing even 5-10% of body weight can significantly improve blood sugar levels.</li>
                    </ul>
                </li>
                <li><strong>Quit Smoking:</strong>
                    <ul>
                        <li>Smoking worsens both glucose metabolism and heart health.</li>
                    </ul>
                </li>
                <li><strong>Stress Management:</strong>
                    <ul>
                        <li>Practice relaxation techniques like yoga or meditation to lower cortisol levels, which impact blood sugar.</li>
                    </ul>
                </li>
            </ul>

            <h3>2. Monitoring Blood Sugar Levels:</h3>
            <ul>
                <li><strong>Routine FBS Testing:</strong>
                    <ul>
                        <li>Regular fasting blood sugar tests can help track trends and detect early signs of diabetes.</li>
                    </ul>
                </li>
                <li><strong>Continuous Glucose Monitors (CGM):</strong>
                    <ul>
                        <li>Useful for patients needing constant monitoring to maintain stable glucose levels.</li>
                    </ul>
                </li>
            </ul>

            <h3>3. Medications:</h3>
            <ul>
                <li><strong>Metformin:</strong>
                    <ul>
                        <li>First-line medication for managing type 2 diabetes by improving insulin sensitivity.</li>
                    </ul>
                </li>
                <li><strong>SGLT2 Inhibitors:</strong>
                    <ul>
                        <li>Lower blood sugar and provide cardiovascular benefits by reducing heart failure risk.</li>
                    </ul>
                </li>
                <li><strong>Insulin Therapy:</strong>
                    <ul>
                        <li>Required for patients whose pancreas cannot produce enough insulin.</li>
                    </ul>
                </li>
                <li><strong>Statins:</strong>
                    <ul>
                        <li>Used to lower cholesterol, as diabetes and high cholesterol together elevate CVD risk.</li>
                    </ul>
                </li>
            </ul>

            <h3>4. Regular Check-ups and Screening:</h3>
            <ul>
                <li><strong>Blood Pressure Monitoring:</strong>
                    <ul>
                        <li>Managing hypertension is essential for individuals with high blood sugar to prevent CVD.</li>
                    </ul>
                </li>
                <li><strong>Cholesterol Testing:</strong>
                    <ul>
                        <li>Lipid profile tests help monitor cholesterol levels, another CVD risk factor.</li>
                    </ul>
                </li>
                <li><strong>ECG or Stress Tests:</strong>
                    <ul>
                        <li>Evaluate heart function and detect early signs of CVD.</li>
                    </ul>
                </li>
            </ul>
            <br>
            <h2>Conclusion</h2>
            <p>
                Managing fasting blood sugar levels is essential for preventing <strong>cardiovascular diseases</strong>, 
                as both high blood sugar and CVD share common risk factors. Elevated FBS can damage blood vessels and 
                increase the risk of heart attacks, strokes, and other cardiovascular complications. Preventive strategies 
                such as lifestyle modifications, regular blood sugar monitoring, and medications are crucial for maintaining 
                optimal glucose levels and reducing CVD risk. Early detection and proactive management significantly 
                improve long-term health outcomes.
            </p>
            <br>
            <p>This chart visualizes the relationship of Fasting Blood Sugar with respect to both genders of each age respectively and the likelihood of having heart disease.</p>
                <ol type="1">
                    <li><b>Gender Categories (0 = Female, 1 = Male):</b></li>
                    <ul>
                        <li>The chart shows two stacked sections for each age group.</li>
                        <li>The blue bar represents male individuals in that age group.</li>
                        <li>The pink bar represents female individuals in that age group.</li>
                    </ul>
                    <li><b>Segregation based On Who has Fasting Blood Sugar (0 = Normal Fasting Blood Sugar, 1 = Abnormal Fasting Blood Sugar):</b></li>
                    <ul>
                        <li>Light Blue =  Males who have Normal Fasting Blood Sugar. </li>
                        <li>Dark Blue =  Males who have Abnormal Fasting Blood Sugar.</li>
                        <li>Light Pink =  Females who have Normal Fasting Blood Sugar. </li>
                        <li>Dark Pink =  Females who have Abnormal Fasting Blood Sugar.</li>
                    </ul>
            <canvas id="fastbsChart"></canvas>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const chartData = {{ chart_data|safe }};  // Data from Django backend

        // Extract unique ages and prepare datasets for Chart.js
        const ages = [...new Set(chartData.map(item => item.age))];

        const maleData = ages.map(age => {
            const entry = chartData.find(item => item.age === age && item.gender === 1) || {};
            return {
                hasfastingbloodsugar: entry[1] || 0,
                nofastingbloodsugar: entry[0] || 0,
            };
        });

        const femaleData = ages.map(age => {
            const entry = chartData.find(item => item.age === age && item.gender === 0) || {};
            return {
                hasfastingbloodsugar: entry[1] || 0,
                nofastingbloodsugar: entry[0] || 0,
            };
        });

        const ctx = document.getElementById('fastbsChart').getContext('2d');
        const anginaChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ages,
                datasets: [
                    {
                        label: 'Male - Abnormal Fasting Blood Sugar',
                        data: maleData.map(data => data.hasfastingbloodsugar),
                        backgroundColor: '#00519c',
                        stack: 'male',
                    },
                    {
                        label: 'Male - Normal Fasting Blood Sugar',
                        data: maleData.map(data => data.nofastingbloodsugar),
                        backgroundColor: '#59afff',
                        stack: 'male',
                    },
                    {
                        label: 'Female - Abnormal Fasting Blood Sugar',
                        data: femaleData.map(data => data.hasfastingbloodsugar),
                        backgroundColor: '#871887',
                        stack: 'female',
                    },
                    {
                        label: 'Female - Normal Fasting Blood Sugar',
                        data: femaleData.map(data => data.nofastingbloodsugar),
                        backgroundColor: '#ff73ff',
                        stack: 'female',
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'Stacked Bar Chart: Fasting Blood Sugar Analysis by Age and Gender'
                    }
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Age'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Number of People In each Age divided on Gender'
                        },
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
</body>
</html>
